@page "/home"
@inject IJSRuntime JSRuntime

<PageTitle>Home</PageTitle>


<link rel="stylesheet" href="/css/home.css">
<h3>Historial de Ordenes de Compra</h3>

@if (orders == null)
{
<p><em>Loading...</em></p>
}
else
{
<table class="table">
    <thead>
    <tr>
        <th>Empresa</th>
        <th>Nombre</th>
        <th>Dirección</th>
        <th>Teléfono</th>
        <th>Total</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var order in orders)
    {
    <tr>
        <td>@order.Empresa</td>
        <td>@order.Nombre</td>
        <td>@order.Direccion</td>
        <td>@order.Telefono</td>
        <td>$@order.Total</td>
    </tr>
    }
    </tbody>
</table>
}

@code {
    private List<OrdenDeCompra> orders;

    protected override async Task OnInitializedAsync()
    {
        var userId = await JSRuntime.InvokeAsync<string>("localStorage.getItem", "userId");
        orders = await JSRuntime.InvokeAsync<List<OrdenDeCompra>>("getUserOrders", userId);
    }

    public class OrdenDeCompra
    {
        public string Empresa { get; set; }
        public string Nombre { get; set; }
        public string Direccion { get; set; }
        public string Telefono { get; set; }
        public decimal Total { get; set; }
    }
}